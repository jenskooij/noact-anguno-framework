var handlerAttributeName="data-no-handler",debugMode=!1,templateCacheMaxAge=300;function httpGetAsync(e,t,n){"use strict";var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status?t(a.responseText):4===a.readyState&&200!==a.status&&n(a.responseText,a.status)},a.open("GET",e,!0),a.send(null)}function afterDomLoads(t){"use strict";if(window.attachEvent)window.attachEvent("onload",t);else if(window.onload){var n=window.onload;window.onload=function(e){n(e),t(e)}}else window.onload=t}function renderTemplate(e,t){for(var n,a=/<%([^%>]+)?%>/g,o=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,r="var r=[];\n",l=0,i=function(e,t){return r+=t?e.match(o)?e+"\n":"r.push("+e+");\n":""!=e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",i};n=a.exec(e);)i(e.slice(l,n.index))(n[1],!0),l=n.index+n[0].length;return i(e.substr(l,e.length-l)),r+='return r.join("");',new Function(r.replace(/[\r\t\n]/g,"")).apply(t)}function renderEndpoint(e,a,t,o,r){var l;l=a.className,a.className=l+" no-loading",httpGetAsync(e,function(n){isDebugEnabled()&&console.info("Retrieved data ",n," from ",e),"function"==typeof o&&(n=o(n,a),isDebugEnabled()&&console.info("Transformed data into ",n)),getTemplate(t,a,function(e,t){!1===e?a.className=l+" no-error":(a.innerHTML=renderTemplate(t,n),a.className=l),"function"==typeof r?r(a):isDebugEnabled()&&console.error("Callback ",r," is not a function")})},function(e,t){console.error("Retrieved: ",e," with status ",t),a.className=l+" no-error","function"==typeof r?r(a):isDebugEnabled()&&console.error("Callback ",r," is not a function")})}function isDebugEnabled(){return debugMode}function initElement(e){var t=e.getAttribute(handlerAttributeName);"function"==typeof window.handlers[t]?(isDebugEnabled()&&console.info("Executing `",t,"` for element ",e),window.handlers[t](e),e.removeAttribute(handlerAttributeName)):console.error("Element ",e," has invalid handler `",t,"`")}function initializeHandlers(e){var t,n=e.querySelectorAll("["+handlerAttributeName+"]");for(t=0;t<n.length;t+=1)initElement(n[t])}function hashCode(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}function storageAvailable(e){var t;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}function getTemplate(n,e,a){var t="tmpl:"+hashCode(n),o=t+":ts";if(isDebugEnabled())console.info("Wont use cache for templates, because debugMode = true."),httpGetAsync(n,function(e){"function"==typeof a&&a(!0,e)},function(e,t){console.error("Couldn't retrieve template from path: ",n,", status ",t),"function"==typeof a&&a(!1,e)});else if(storageAvailable("localStorage"))if(localStorage.getItem(t)||localStorage.getItem(o)){var r=parseInt(localStorage.getItem(o)),l=getCurrentTimestamp();templateCacheMaxAge<l-r?(isDebugEnabled()&&console.info("Cache expired for ",n,", renewing cache"),populateStorage(n,t,o,a)):(isDebugEnabled()&&console.info("Cache for ",n," is recent, use it."),a(!0,localStorage.getItem(t)))}else populateStorage(n,t,o,a);else isDebugEnabled()&&console.error("No localStorage available.")}function getCurrentTimestamp(){return Math.floor((new Date).valueOf()/1e3)}function populateStorage(n,t,a,o){httpGetAsync(n,function(e){"function"==typeof o&&(localStorage.setItem(t,e),localStorage.setItem(a,getCurrentTimestamp().toString()),o(!0,e))},function(e,t){console.error("Couldn't retrieve template from path: ",n,", status ",t),"function"==typeof o&&o(!1,e)})}window.dataHandlers={},window.handlers={},window.callbacks={},window.dataHandlers.noJsonDataHandler=function(e,t){return JSON.parse(e)},window.handlers.noHandler=function(e){var t=e.getAttribute("data-no-data-handler"),n=window.dataHandlers.noJsonDataHandler,a=e.getAttribute("data-no-callback"),o=window.callbacks.noCallback;isDebugEnabled()&&console.info("Datahandler: ",t),"function"==typeof window.dataHandlers[t]?n=window.dataHandlers[t]:isDebugEnabled()&&(null!==t?console.error("Datahandler ",t," is not a registered handler. Please register to window.dataHandlers"):console.info("Using default noJsonDataHandler")),"function"==typeof window.callbacks[a]?o=window.callbacks[a]:isDebugEnabled()&&(null!==a?console.error("Callback ",a," is not a registered callback. Please register to window.callbacks"):console.info("Using default noCallback")),renderEndpoint(e.getAttribute("data-no-url"),e,e.getAttribute("data-no-template"),n,o)},window.callbacks.noCallback=function(e){e.removeAttribute("data-no-url"),e.removeAttribute("data-no-template"),e.removeAttribute("data-no-data-handler"),e.removeAttribute("data-no-callback"),initializeHandlers(e)},afterDomLoads(function(){"use strict";function e(e){var t=new Event(e);window.dispatchEvent(t),isDebugEnabled()&&console.info("Event fired `",e,"`")}var t;e("no-initial-dom-loaded"),void 0!==(t=document.getElementsByTagName("body")[0])&&t.hasAttribute("data-no-debug")&&("true"===t.getAttribute("data-no-debug")&&(console.info("Debug mode is enabled."),debugMode=!0),t.removeAttribute("data-no-debug")),e("no-debug-initialized"),e("no-dom-loaded"),initializeHandlers(document),e("no-handlers-initialized")});